<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SkillBrowse</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f0f11;
      color: #e8e8ec;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* „Éò„ÉÉ„ÉÄ„Éº */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-bottom: 1px solid #1e1e24;
      background: #0f0f11;
    }
    .logo { font-size: 15px; font-weight: 700; color: #7c6af7; letter-spacing: 0.02em; }
    .header-actions { display: flex; gap: 8px; }
    .icon-btn {
      background: none; border: none; cursor: pointer;
      color: #666; font-size: 16px; padding: 4px; border-radius: 6px;
    }
    .icon-btn:hover { color: #ccc; background: #1e1e24; }

    /* „Çπ„Ç≠„É´ÈÅ∏Êäû */
    .skill-bar {
      padding: 8px 16px;
      border-bottom: 1px solid #1e1e24;
      display: flex;
      gap: 6px;
      overflow-x: auto;
      scrollbar-width: none;
    }
    .skill-bar::-webkit-scrollbar { display: none; }
    .skill-chip {
      flex-shrink: 0;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      border: 1px solid #2a2a32;
      background: #1a1a22;
      color: #999;
      transition: all 0.15s;
    }
    .skill-chip:hover { border-color: #7c6af7; color: #ccc; }
    .skill-chip.active { background: #7c6af7; border-color: #7c6af7; color: #fff; }

    /* „ÉÅ„É£„ÉÉ„Éà„Ç®„É™„Ç¢ */
    #chat {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .message {
      max-width: 90%;
      padding: 10px 14px;
      border-radius: 12px;
      font-size: 13.5px;
      line-height: 1.6;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .message.user {
      align-self: flex-end;
      background: #7c6af7;
      color: #fff;
      border-bottom-right-radius: 4px;
    }
    .message.assistant {
      align-self: flex-start;
      background: #1a1a22;
      color: #e0e0e8;
      border-bottom-left-radius: 4px;
    }
    .message.system {
      align-self: center;
      background: transparent;
      color: #555;
      font-size: 12px;
      text-align: center;
    }

    /* „Çø„Ç§„Éî„É≥„Ç∞„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº */
    .typing { display: flex; gap: 4px; align-items: center; padding: 12px 14px; }
    .typing span {
      width: 6px; height: 6px; border-radius: 50%; background: #555;
      animation: bounce 1.2s infinite;
    }
    .typing span:nth-child(2) { animation-delay: 0.2s; }
    .typing span:nth-child(3) { animation-delay: 0.4s; }
    @keyframes bounce {
      0%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-6px); }
    }

    /* ÂÖ•Âäõ„Ç®„É™„Ç¢ */
    .input-area {
      padding: 12px 16px;
      border-top: 1px solid #1e1e24;
      display: flex;
      gap: 8px;
      align-items: flex-end;
      background: #0f0f11;
    }
    .context-toggle {
      flex-shrink: 0;
      background: #1a1a22;
      border: 1px solid #2a2a32;
      border-radius: 8px;
      color: #666;
      font-size: 12px;
      padding: 6px 8px;
      cursor: pointer;
      white-space: nowrap;
    }
    .context-toggle.on { color: #7c6af7; border-color: #7c6af7; }
    textarea {
      flex: 1;
      background: #1a1a22;
      border: 1px solid #2a2a32;
      border-radius: 10px;
      color: #e0e0e8;
      font-size: 13.5px;
      padding: 8px 12px;
      resize: none;
      min-height: 38px;
      max-height: 120px;
      outline: none;
      font-family: inherit;
      line-height: 1.5;
    }
    textarea:focus { border-color: #7c6af7; }
    #send-btn {
      flex-shrink: 0;
      background: #7c6af7;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 16px;
      width: 36px;
      height: 36px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.15s;
    }
    #send-btn:hover { background: #6a5ae0; }
    #send-btn:disabled { background: #2a2a32; color: #555; cursor: not-allowed; }

    /* Ë®≠ÂÆö„Éë„Éç„É´ */
    #settings-panel {
      display: none;
      padding: 16px;
      background: #13131a;
      border-bottom: 1px solid #1e1e24;
    }
    #settings-panel.open { display: block; }
    .settings-row { margin-bottom: 12px; }
    .settings-row label { display: block; font-size: 12px; color: #888; margin-bottom: 4px; }
    .settings-row input {
      width: 100%;
      background: #1a1a22;
      border: 1px solid #2a2a32;
      border-radius: 8px;
      color: #e0e0e8;
      font-size: 13px;
      padding: 8px 10px;
      outline: none;
    }
    .settings-row input:focus { border-color: #7c6af7; }
    .settings-row select {
      width: 100%;
      background: #1a1a22;
      border: 1px solid #2a2a32;
      border-radius: 8px;
      color: #e0e0e8;
      font-size: 13px;
      padding: 8px 10px;
      outline: none;
      cursor: pointer;
      appearance: none;
    }
    .settings-row select:focus { border-color: #7c6af7; }
    .save-btn {
      background: #7c6af7;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 13px;
      padding: 8px 16px;
      cursor: pointer;
      width: 100%;
    }

    /* „Çπ„É©„ÉÉ„Ç∑„É•„Ç≥„Éû„É≥„Éâ„É°„Éã„É•„Éº */
    .input-wrapper {
      flex: 1;
      position: relative;
    }
    #slash-menu {
      display: none;
      position: absolute;
      bottom: calc(100% + 6px);
      left: 0; right: 0;
      background: #1a1a22;
      border: 1px solid #2a2a32;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      z-index: 100;
    }
    #slash-menu.open { display: block; }
    .slash-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 13px;
    }
    .slash-item:hover, .slash-item.active { background: #26263a; }
    .slash-name { color: #7c6af7; font-weight: 600; font-family: monospace; }
    .slash-label { color: #888; font-size: 12px; }

    /* ÂÖ•Âäõ„Ç®„É™„Ç¢„ÅÆtextarea„ÇíwrapperÂÜÖ„Å´ */
    .input-area textarea {
      width: 100%;
    }
  </style>
</head>
<body>

<header>
  <span class="logo">‚ö° SkillBrowse</span>
  <div class="header-actions">
    <button class="icon-btn" id="settings-btn" title="Ë®≠ÂÆö">‚öôÔ∏è</button>
    <button class="icon-btn" id="clear-btn" title="„ÉÅ„É£„ÉÉ„Éà„Çí„ÇØ„É™„Ç¢">üóëÔ∏è</button>
  </div>
</header>

<!-- Ë®≠ÂÆö„Éë„Éç„É´ -->
<div id="settings-panel">
  <div class="settings-row">
    <label>Z.ai API Key</label>
    <input type="password" id="api-key-input" placeholder="sk-..." />
  </div>
  <div class="settings-row">
    <label>ÈÄÅ‰ø°„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà</label>
    <select id="shortcut-select">
      <option value="shift+enter">Shift + Enter</option>
      <option value="cmd+enter">‚åò / Ctrl + Enter</option>
    </select>
  </div>
  <button class="save-btn" id="save-settings">‰øùÂ≠ò</button>
</div>

<!-- „Çπ„Ç≠„É´ÈÅ∏Êäû -->
<div class="skill-bar" id="skill-bar">
  <!-- JS „ÅßÂãïÁöÑÁîüÊàê -->
</div>

<!-- „ÉÅ„É£„ÉÉ„Éà -->
<div id="chat">
  <div class="message system">SkillBrowse „Å∏„Çà„ÅÜ„Åì„Åù„ÄÇ<br>„Éö„Éº„Ç∏„Å´„Å§„ÅÑ„Å¶‰Ωï„Åß„ÇÇËÅû„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</div>
</div>

<!-- ÂÖ•Âäõ„Ç®„É™„Ç¢ -->
<div class="input-area">
  <button class="context-toggle on" id="context-toggle" title="„Éö„Éº„Ç∏ÊÉÖÂ†±„ÇíÂê´„ÇÅ„Çã">üìÑ „Éö„Éº„Ç∏</button>
  <div class="input-wrapper">
    <!-- „Çπ„É©„ÉÉ„Ç∑„É•„Ç≥„Éû„É≥„Éâ„É°„Éã„É•„Éº -->
    <div id="slash-menu"></div>
    <textarea id="input" placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ‚Ä¶ (/ „Åß„Çπ„Ç≠„É´ÈÅ∏Êäû)" rows="1"></textarea>
  </div>
  <button id="send-btn" title="ÈÄÅ‰ø° (Shift+Enter)">‚û§</button>
</div>

<script src="sidepanel.js"></script>
</body>
</html>
